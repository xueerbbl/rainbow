"use strict";!function(){if("function"!=typeof window.getMatchedCSSRules){var e=/[\w-]+/g,t=/#[\w-]+/g,o=/\.[\w-]+/g,n=/\[[^\]]+\]/g,i=/\:(?!not)[\w-]+(\(.*\))?/g,r=/\:\:?(after|before|first-letter|first-line|selection)/g,c=function(e){for(var t=[],o=0,n=e.length;n>o;o++)t.push(e[o]);return t},a=function(e){var t=document.createElement("a");return t.href=e,t.host},l=function(e){var t,o=e.media&&e.media.mediaText;if("true"==objectFit.disableCrossDomain&&(t=a(e.href),t!==window.location.host))return[];if(e.disabled)return[];if(window.matchMedia){if(o&&o.length&&!window.matchMedia(o).matches)return[]}else if(o&&o.length)return[];return c(e.cssRules)},d=function(e,t){e.match(t);return t?t.length:0},s=function(c){for(var a,l,s=[0,0,0],u=c.split(" ");a=u.shift(),"string"==typeof a;)l=d(a,r),s[2]=l,l&&(a=a.replace(r,"")),l=d(a,i),s[1]=l,l&&(a=a.replace(i,"")),l=d(a,n),s[1]+=l,l&&(a=a.replace(n,"")),l=d(a,t),s[0]=l,l&&(a=a.replace(t,"")),l=d(a,o),s[1]+=l,l&&(a=a.replace(o,"")),s[2]+=d(a,e);return parseInt(s.join(""),10)},u=function(e,t){for(var o,n,i=t.split(","),r=0;o=i.shift();)f(e,o)&&(n=s(o),r=n>r?n:r);return r},w=function(e,t){var o=function(t,o){return u(e,o.selectorText)-u(e,t.selectorText)};return t.sort(o)},m=function(e,t){for(var o=(e.document||e.ownerDocument).querySelectorAll(t),n=0;o[n]&&o[n]!==e;)n++;return o[n]?!0:!1},f=function(e,t){var o=function(t){return e.matches?e.matches(t):e.matchesSelector?e.matchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.msMatchesSelector?e.msMatchesSelector(t):m(e,t)};return o(t)};window.getMatchedCSSRules=function(e){var t,o,n,i,r=[];for(t=c(window.document.styleSheets);o=t.shift();)for(n=l(o);i=n.shift();)i.styleSheet?n=l(i.styleSheet).concat(n):i.media?n=l(i).concat(n):f(e,i.selectorText)&&r.push(i);return w(e,r)}}}(),function(){var e=0;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame,window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame,window.requestAnimationFrame=function(t){var o=(new Date).getTime(),n=Math.max(0,16-(o-e)),i=window.setTimeout(function(){t(o+n)},n);return e=o+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(e){var t={};t._debug=!1,t.observer=null,t.disableCrossDomain="false",t.getComputedStyle=function(e,t){return t=t||window,t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle},t.getDefaultComputedStyle=function(e){var t=e.cloneNode(!0),o={},n=document.createElement("iframe");document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write("<body></body>"),n.contentWindow.document.body.appendChild(t),n.contentWindow.document.close();var i,r,c=n.contentWindow.document.querySelectorAll(e.nodeName.toLowerCase())[0],a=this.getComputedStyle(c,n.contentWindow);for(r in a)if(i=a.getPropertyValue===!0?a.getPropertyValue(r):a[r],null!==i)switch(r){default:o[r]=i;break;case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":}return document.body.removeChild(n),o},t.getMatchedStyle=function(e,t){var o=null,n=null;e.style.getPropertyValue?n=e.style.getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[t]);var i,r,c=window.getMatchedCSSRules(e),a=c.length;if(a)for(;a-->0&&(i=c[a],r=i.style.getPropertyPriority(t),null!==o&&!r||(o=i.style.getPropertyValue(t),!r)););return o||null===n||(o=n),o},t.orientation=function(e){if(e.parentNode&&"x-object-fit"===e.parentNode.nodeName.toLowerCase()){var t=e.naturalWidth||e.clientWidth,o=e.naturalHeight||e.clientHeight,n=e.parentNode.clientWidth,i=e.parentNode.clientHeight;!o||t/o>n/i?"wider"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","wider"),e.className="x-object-fit-wider",this._debug&&window.console&&console.log("x-object-fit-wider")):"taller"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","taller"),e.className="x-object-fit-taller",this._debug&&window.console&&console.log("x-object-fit-taller"))}},t.process=function(e){if(e.selector&&e.replacedElements){switch(t.disableCrossDomain=e.disableCrossDomain||"false",e.fittype=e.fittype||"none",e.fittype){default:return;case"none":case"fill":case"contain":case"cover":}var o=e.replacedElements;if(o.length)for(var n=0,i=o.length;i>n;n++)this.processElement(o[n],e)}},t.processElement=function(e,o){var n,i,r=t.getComputedStyle(e),c=t.getDefaultComputedStyle(e),a=document.createElement("x-object-fit");t._debug&&window.console&&console.log("Applying to WRAPPER-------------------------------------------------------");for(n in r)switch(n){default:i=t.getMatchedStyle(e,n),null!==i&&""!==i&&(t._debug&&window.console&&console.log(n+": "+i),a.style[n]=i);break;case"length":case"parentRule":}t._debug&&window.console&&console.log("Applying to REPLACED ELEMENT-------------------------------------------------------");for(n in c)switch(n){default:i=c[n],t._debug&&window.console&&""!==i&&(console.log(n+": "+i),void 0===e.style[n]&&console.log("Indexed style properties (`"+n+"`) not supported in: "+window.navigator.userAgent)),e.style[n]?e.style[n]=i:e.style.property=i;break;case"length":case"parentRule":}a.setAttribute("class","x-object-fit-"+o.fittype),e.parentNode.insertBefore(a,e),a.appendChild(e),t.orientation(e);var l=null,d=function(){null!==l&&window.cancelAnimationFrame(l),l=window.requestAnimationFrame(function(){t.orientation(e)})};switch(o.fittype){default:break;case"contain":case"cover":window.addEventListener?(e.addEventListener("load",d,!1),window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1)):(e.attachEvent("onload",d),window.attachEvent("onresize",d))}},t.listen=function(e){var o=function(o){for(var n=0,i=e.length;i>n;n++)(o.mozMatchesSelector&&o.mozMatchesSelector(e[n].selector)||o.msMatchesSelector&&o.msMatchesSelector(e[n].selector)||o.oMatchesSelector&&o.oMatchesSelector(e[n].selector)||o.webkitMatchesSelector&&o.webkitMatchesSelector(e[n].selector))&&(e[n].replacedElements=[o],t.process(e[n]),t._debug&&window.console&&console.log("Matching node inserted: "+o.nodeName))},n=function(e){t.observer.disconnect(),o(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},i=function(e){window.removeEventListener("DOMNodeInserted",i,!1),o(e.target),window.addEventListener("DOMNodeInserted",i,!1)},r=function(e){"x-object-fit"===e.nodeName.toLowerCase()&&(e.parentNode.removeChild(e),t._debug&&window.console&&console.log("Matching node removed: "+e.nodeName))},c=function(e){t.observer.disconnect(),r(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},a=function(e){window.removeEventListener("DOMNodeRemoved",a,!1),r(e.target.parentNode),window.addEventListener("DOMNodeRemoved",a,!1)};window.MutationObserver?(t._debug&&window.console&&console.log("DOM MutationObserver"),this.observer=new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes&&e.addedNodes.length)for(var t=e.addedNodes,o=0,i=t.length;i>o;o++)n(t[o]);e.removedNodes&&e.removedNodes.length&&c(e.target)})}),this.observer.observe(document.documentElement,{childList:!0,subtree:!0})):window.addEventListener&&(t._debug&&window.console&&console.log("DOM Mutation Events"),window.addEventListener("DOMNodeInserted",i,!1),window.addEventListener("DOMNodeRemoved",a,!1))},t.init=function(e){if(e){e instanceof Array||(e=[e]);for(var t=0,o=e.length;o>t;t++)e[t].replacedElements=document.querySelectorAll(e[t].selector),this.process(e[t]);this.listen(e)}},t.polyfill=function(e){"objectFit"in document.documentElement.style==!1?(t._debug&&window.console&&console.log("object-fit not natively supported"),"complete"===document.readyState?t.init(e):window.addEventListener?window.addEventListener("load",function(){t.init(e)},!1):window.attachEvent("onload",function(){t.init(e)})):t._debug&&window.console&&console.log("object-fit natively supported")},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof e&&"object"==typeof e.document&&(e.objectFit=t)}(window);